{% extends "base.html" %}

{% block title %}Update Profile - E-Shop{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <h2 class="mb-4">Update Your Profile</h2>
        <form method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}
            
            <div class="mb-3">
                <label for="id_full_name" class="form-label">Full Name</label>
                <input 
                    type="text" 
                    name="full_name" 
                    class="form-control {% if form.full_name.errors %}is-invalid{% endif %}" 
                    id="id_full_name" 
                    value="{{ form.full_name.value|default_if_none:'' }}"
                    placeholder="Enter your full name"
                    required
                >
                {% if form.full_name.errors %}
                    <div class="invalid-feedback">
                        {{ form.full_name.errors.as_text }}
                    </div>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="id_username" class="form-label">Username</label>
                <input 
                    type="text" 
                    name="username" 
                    class="form-control {% if form.username.errors %}is-invalid{% endif %}" 
                    id="id_username" 
                    value="{{ form.username.value|default_if_none:'' }}"
                    placeholder="Enter your username"
                >
                {% if form.username.errors %}
                    <div class="invalid-feedback">
                        {{ form.username.errors.as_text }}
                    </div>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="id_email" class="form-label">Email Address</label>
                <input 
                    type="email" 
                    name="email" 
                    class="form-control {% if form.email.errors %}is-invalid{% endif %}" 
                    id="id_email" 
                    value="{{ form.email.value|default_if_none:'' }}"
                    placeholder="Enter your email address"
                    required
                >
                {% if form.email.errors %}
                    <div class="invalid-feedback">
                        {{ form.email.errors.as_text }}
                    </div>
                {% endif %}
            </div>

            <div class="mb-3">
                <label for="id_profile_picture" class="form-label">Profile Picture</label>
                {{ form.profile_picture }}
                {% if form.profile_picture.errors %}
                    <div class="invalid-feedback d-block">
                        {{ form.profile_picture.errors.as_text }}
                    </div>
                {% endif %}
                {% if user.profile_picture %}
                    <img src="{{ user.profile_picture.url }}" alt="Current Profile Picture" class="img-thumbnail mt-2" style="max-width: 150px;">
                {% endif %}
            </div>

            <button type="submit" class="btn btn-primary">Save Changes</button>
        </form>
    </div>
</div>
{% endblock %}
